<!DOCTYPE html>
<html>
    <head>
        <title>Hércules : Sistema de gestión de Patentes (UM - SGI - ESB - SGEPII)</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Hércules</a></span>
                            </li>
                                                    <li>
                                <span><a href="597853529.html">Hércules</a></span>
                            </li>
                                                    <li>
                                <span><a href="597852519.html">SGI. Sistema de gestión de investigación</a></span>
                            </li>
                                                    <li>
                                <span><a href="597853447.html">Guia de Implantación - Checklist</a></span>
                            </li>
                                                    <li>
                                <span><a href="UM----Universidad-de-Murcia_597853451.html">UM -  Universidad de Murcia</a></span>
                            </li>
                                                    <li>
                                <span><a href="597853450.html">Sistema de Gestión de Investigación - APIs Integración</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Hércules : Sistema de gestión de Patentes (UM - SGI - ESB - SGEPII)
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Usuario desconocido (alicia.alvarez)</span>, last modified on mar 25, 2022
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><br/></p><hr/><p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1728467765405 {padding: 0px;}
div.rbtoc1728467765405 ul {margin-left: 0px;}
div.rbtoc1728467765405 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1728467765405'>
<ul class='toc-indentation'>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-SistemadeGestiónEconómicadeProtecciónIndustrialeIntelectual'>Sistema de Gestión Económica de Protección Industrial e Intelectual</a>
<ul class='toc-indentation'>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-Entidades'>Entidades</a></li>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-Enumerados'>Enumerados</a></li>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-Modelológico'>Modelo lógico</a></li>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-API'>API</a>
<ul class='toc-indentation'>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-Definicióndelosobjetos'>Definición de los objetos</a>
<ul class='toc-indentation'>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-Invencion'>Invencion</a></li>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-DatoEconomico'>DatoEconomico</a></li>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-DatoEconomicoDetalle'>DatoEconomicoDetalle</a></li>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-Columna'>Columna</a></li>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-Documento(sereutilizaríaelmismoqueeldefinidoenUM-SGI-ESB-SGE-Ejecucióneconómica)'>Documento (se reutilizaría el mismo que el definido en UM - SGI - ESB - SGE - Ejecución económica)</a></li>
</ul>
</li>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-Servicios'>Servicios</a></li>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-ColumnasGastos'>Columnas Gastos</a></li>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-ColumnasIngresos'>Columnas Ingresos</a></li>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-Ejemplos'>Ejemplos</a>
<ul class='toc-indentation'>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-Columnasdegastos(/gastos-invencion/columnas)'>Columnas de gastos (/gastos-invencion/columnas)</a></li>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-Gastos(/gastos-invencion)'>Gastos (/gastos-invencion)</a></li>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-Detallegasto(/gastos-invencion/{id})'>Detalle gasto (/gastos-invencion/{id})</a></li>
</ul>
</li>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-Seguridad'>Seguridad</a>
<ul class='toc-indentation'>
<li><a href='#SistemadegestióndePatentes(UMSGIESBSGEPII)-Seguridadconusuario/contraseña'>Seguridad con usuario/contraseña</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div></p><hr/><div class="confluence-information-macro confluence-information-macro-information"><p class="title conf-macro-render">Control de cambios</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><br/></p><p><strong>Leyenda<br/></strong></p><div class="table-wrap"><table class="wrapped relative-table confluenceTable" style="width: 15.4788%;"><colgroup><col style="width: 29.9639%;"/><col style="width: 33.574%;"/><col style="width: 36.4621%;"/></colgroup><tbody><tr><td class="highlight-green confluenceTd" title="Color de fondo: Verde" data-highlight-colour="green">Nuevo</td><td class="highlight-yellow confluenceTd" title="Color de fondo: Amarillo" colspan="1" data-highlight-colour="yellow">Modificado</td><td class="highlight-red confluenceTd" title="Color de fondo: Rojo" colspan="1" data-highlight-colour="red">Eliminado</td></tr></tbody></table></div><p><br/></p><p><strong>Historial de cambios<br/></strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 68.9606%;"><colgroup><col style="width: 19.2405%;"/><col style="width: 80.7757%;"/></colgroup><tbody><tr><th class="confluenceTh">Fecha</th><th class="confluenceTh">Cambios</th></tr><tr><td colspan="1" class="confluenceTd"><div class="content-wrapper"><p><time datetime="2021-09-30" class="date-past">30-sep-2021</time> </p></div></td><td colspan="1" class="confluenceTd"><p>Adaptación para poder diferenciar los gastos que han de intervenir en los repartos de regalías del resto y para identificar qué columnas corresponden a los importes a incluir en los repartos.</p></td></tr></tbody></table></div></div></div><h1 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-SistemadeGestiónEconómicadeProtecciónIndustrialeIntelectual">Sistema de Gestión Económica de Protección Industrial e Intelectual</h1><h2 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-Entidades">Entidades</h2><div class="confluence-information-macro confluence-information-macro-information"><p class="title conf-macro-render">Cambios</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><time datetime="2021-09-30" class="date-past">30-sep-2021</time> Se actualizan las entidades para:</p><ul><li>Añadir al modelo del SGEPII la entidad Columna, ya que pasa a ser distinta a la del SGE y ya no se podría reutilizar.</li></ul></div></div><p>Hay entidades que se reutilizan del modelo de Ejecución económica del SGE y pero se repiten aquí por claridad aunque ya están descritas en el API del SGE: <a href="597853496.html">SGI - ESB - SGE - Ejecuci&oacute;n econ&oacute;mica</a>.</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Entidad</th><th class="confluenceTh">Descripción</th></tr><tr><td colspan="1" class="confluenceTd">DatoEconomico</td><td colspan="1" class="confluenceTd"><p>Entidad que representa cualquier dato económico. Tendrá que venir identificado por un identificador único, por el proyecto al que pertenece, anualidad, partida presupuestaria y un código económico (opcional en algunos de los casos).</p><p>El resto de campos del dato económico se tratarán como columnas dinámicas. Se indicará por cada columna el identificador del campo, el nombre del campo y si es una columna sobre la que se tiene que hacer una suma para mostrarlo en el SGI como un campo totalizador.</p></td></tr><tr><td colspan="1" class="confluenceTd">Columna</td><td colspan="1" class="confluenceTd"><p title="">Contiene el listado de columnas que serán mostradas en las pantallas del SGI dependiendo de la pantalla en la que se esté: gastos o repartos.</p><p title="">Por cada columna se tendrá el identificador del campo, el nombre del campo, si es una columna sobre la que se tiene que hacer una suma para mostrarlo en el SGI como un campo totalizador, que, a los efectos de esta integración para las invenciones, equivaldría a identificar dicha columna como de tipo numéricos y si es <u>la columna</u> (solo puede haber una) que se ha de utilizar para hacer el cálculo del importe a deducir en los repartos de regalías.</p></td></tr><tr><td colspan="1" class="confluenceTd">DatoEconomicoDetalle</td><td colspan="1" class="confluenceTd"><p>Entidad que representa el detalle de un dato económico con todos sus campos para mostrarlo en una pantalla de consulta del dato económico.</p><p>Tendrá unos campos fijos (identificador único, identificador del proyecto al que pertenece, anualidad, partida presupuestaria y un código económico) y unos campos dinámicos. Por cada campo se detallará el nombre y el valor del campo para mostrarlo en la pantalla del SGI</p></td></tr><tr><td colspan="1" class="confluenceTd"><p>Invencion</p></td><td colspan="1" class="confluenceTd">Entidad que representa a la invención cara a poder ser presentada en listas de valores con su título.</td></tr></tbody></table></div><h2 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-Enumerados">Enumerados</h2><div class="confluence-information-macro confluence-information-macro-information"><p class="title conf-macro-render">Cambios</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><time datetime="2021-09-30" class="date-past">30-sep-2021</time> Se actualiza la lista de enumerados para:</p><ul><li>Añadir el enumerado TipoOperacion.</li></ul></div></div><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 100.0%;"><colgroup><col style="width: 8.15545%;"/><col style="width: 91.8446%;"/></colgroup><tbody><tr><th colspan="1" class="confluenceTh">Entidad</th><th colspan="1" class="confluenceTh">Descripción</th></tr><tr><td colspan="1" class="confluenceTd">TipoDatoEconomico</td><td colspan="1" class="confluenceTd"><p>Puede tomar los siguientes valores:</p><ul><li>Ingreso</li><li>Gasto</li></ul></td></tr><tr><td colspan="1" class="confluenceTd">TipoOperacion</td><td colspan="1" class="confluenceTd"><p title="">Puede tomar los siguientes valores:</p><ul title=""><li>GAS</li><li>REP</li></ul></td></tr></tbody></table></div><h2 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-Modelológico">Modelo lógico</h2><div class="confluence-information-macro confluence-information-macro-information"><p class="title conf-macro-render">Cambios</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><time datetime="2021-09-30" class="date-past">30-sep-2021</time> Se actualiza el modelo lógico para:</p><ul><li>Añadir entidad &quot;Columna&quot; como propia del modelo de PII.</li><li>Añadir enumerado &quot;TipoOperacion&quot; y relacionarlo con DatoEconomico.</li></ul></div></div><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" width="600" src="attachments/597852911/597872621.png" data-image-src="attachments/597852911/597872621.png" data-unresolved-comment-count="0" data-linked-resource-id="597872621" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ESB SGEPII Logical Model.png" data-base-url="https://confluence.um.es/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="597852911" data-linked-resource-container-version="12" alt=""></span></p><h2 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-API">API</h2><p>Características generales que todas las API REST deben de cumplir:</p><ul><li><a href="https://confluence.um.es/confluence/display/HERCULES/Consultas+filtradas+y+paginadas" rel="nofollow">Consultas filtradas y paginadas</a></li><li><a href="https://confluence.um.es/confluence/display/HERCULES/Formatos+de+datos+API" rel="nofollow">Formatos de datos API</a></li></ul><h3 class="content-wrapper" id="SistemadegestióndePatentes(UMSGIESBSGEPII)-Definicióndelosobjetos">Definición de los objetos</h3><p>Hay objetos que se reutilizan del modelo de Ejecución económica del SGE y por tanto no se repiten aquí, están descritos en el API del SGE:  <a href="597852803.html">UM - SGI - ESB - SGE - Ejecuci&oacute;n econ&oacute;mica</a>.</p><div class="confluence-information-macro confluence-information-macro-information"><p class="title conf-macro-render">Cambios</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><time datetime="2021-09-30" class="date-past">30-sep-2021</time> Se actualiza la definición de objetos para:</p><ul><li>Añadir objeto &quot;Columna&quot; como propio del modelo de PII.</li></ul></div></div><h4 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-Invencion">Invencion</h4><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 86.3239%;"><colgroup><col style="width: 10.78%;"/><col style="width: 7.98985%;"/><col style="width: 81.2302%;"/></colgroup><tbody><tr><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong>Nombre</strong></td><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong>Tipo</strong></td><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong>Descripción</strong></td></tr><tr><td class="confluenceTd">id</td><td class="confluenceTd">String</td><td colspan="1" class="confluenceTd">Identificador único de la invención.</td></tr><tr><td colspan="1" class="confluenceTd">titulo</td><td colspan="1" class="confluenceTd">String</td><td colspan="1" class="confluenceTd"><p>Título de la invención.</p></td></tr></tbody></table></div><h4 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-DatoEconomico">DatoEconomico</h4><div class="table-wrap"><table class="wrapped relative-table confluenceTable" style="width: 86.3239%;"><colgroup><col style="width: 10.5263%;"/><col style="width: 7.92644%;"/><col style="width: 81.5472%;"/></colgroup><tbody><tr><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong>Nombre</strong></td><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong>Tipo</strong></td><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong>Descripción</strong></td></tr><tr><td class="confluenceTd">id</td><td class="confluenceTd">String</td><td colspan="1" class="confluenceTd">Identificador del dato económico. Tiene que ser un identificador único.</td></tr><tr><td colspan="1" class="confluenceTd">tipo</td><td colspan="1" class="confluenceTd">String</td><td colspan="1" class="confluenceTd"><p>Dos valores:</p><ul><li>Gasto</li><li>Ingreso</li></ul></td></tr><tr><td colspan="1" class="confluenceTd">columnas</td><td colspan="1" class="confluenceTd">Map[clave,valor]</td><td colspan="1" class="confluenceTd"><p>Mapa de propiedades.</p><p>El valor será un String salvo en aquellas columnas que sean acumulables (se puede manejar como un importe y hacer operaciones numéricas con ella en el SGI).</p></td></tr></tbody></table></div><h4 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-DatoEconomicoDetalle">DatoEconomicoDetalle</h4><div class="table-wrap"><table class="wrapped relative-table confluenceTable" style="width: 86.3239%;"><colgroup><col style="width: 10.78%;"/><col style="width: 7.98985%;"/><col style="width: 81.2302%;"/></colgroup><tbody><tr><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong>Nombre</strong></td><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong>Tipo</strong></td><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong>Descripción</strong></td></tr><tr><td class="confluenceTd">id</td><td class="confluenceTd">String</td><td colspan="1" class="confluenceTd">Identificador del dato económico. Tiene que ser un identificador único.</td></tr><tr><td colspan="1" class="confluenceTd">documentos</td><td colspan="1" class="confluenceTd">Lista[Documento]</td><td colspan="1" class="confluenceTd"><p>Lista de documentos asociados al gasto (sin el contenido binario del fichero).</p></td></tr></tbody></table></div><h4 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-Columna">Columna</h4><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col style="width: 122.0px;"/><col style="width: 74.0px;"/><col style="width: 1630.0px;"/></colgroup><tbody><tr><th colspan="1" class="confluenceTh"><strong title="">Nombre</strong></th><th colspan="1" class="confluenceTh"><strong title="">Tipo</strong></th><th colspan="1" class="confluenceTh"><strong title="">Descripción</strong></th></tr><tr><td colspan="1" class="confluenceTd">id</td><td colspan="1" class="confluenceTd">String</td><td colspan="1" class="confluenceTd">Identificador de la columna</td></tr><tr><td class="confluenceTd">nombre</td><td class="confluenceTd">String</td><td colspan="1" class="confluenceTd">Nombre de la columna</td></tr><tr><td colspan="1" class="confluenceTd">acumulable</td><td colspan="1" class="confluenceTd">Boolean</td><td colspan="1" class="confluenceTd"><p title="">Indica si la columna se puede sumar y por extensión, además indica que es numérica.</p><p title="">Dos valores:</p><ul title=""><li>true</li><li>false</li></ul></td></tr><tr><td colspan="1" class="confluenceTd">importeReparto</td><td colspan="1" class="confluenceTd">Boolean</td><td colspan="1" class="confluenceTd"><p title="">Indica que la columna se corresponde con el importe que se quiere tener en cuenta a la hora de calcular el reparto de regalías. SOLO UNA COLUMNA PODRÁ TENER ESTE CAMPO ACTIVO, en el caso de UM, será el campo que contenga el dato de base imponible.</p><p title="">Dos valores:</p><ul title=""><li>true</li><li>false</li></ul></td></tr></tbody></table></div><h4 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-Documento(sereutilizaríaelmismoqueeldefinidoenUM-SGI-ESB-SGE-Ejecucióneconómica)">Documento (se reutilizaría el mismo que el definido en <a href="597852803.html">UM - SGI - ESB - SGE - Ejecuci&oacute;n econ&oacute;mica</a>)</h4><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong>Nombre</strong></td><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong>Tipo</strong></td><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong>Descripción</strong></td></tr><tr><td colspan="1" class="confluenceTd">id</td><td colspan="1" class="confluenceTd">String</td><td colspan="1" class="confluenceTd">Identificador único del documento</td></tr><tr><td class="confluenceTd">nombre</td><td class="confluenceTd">String</td><td colspan="1" class="confluenceTd">Nombre del documento a mostrar</td></tr><tr><td class="confluenceTd"><p>nombreFichero</p></td><td class="confluenceTd">String</td><td colspan="1" class="confluenceTd">Nombre del fichero con extensión</td></tr></tbody></table></div><h3 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-Servicios">Servicios</h3><p>Hay servicios a los que no se hace mención en este API porque la funcionalidad que los precisa, por ejemplo, la recuperación del binario de cada documento asociado a un gasto, ha de reutilizar los que ya están definidos en el modelo de Ejecución económica del SGE y por tanto no se repiten aquí, están descritos en el API del SGE: <a href="597852803.html">UM - SGI - ESB - SGE - Ejecuci&oacute;n econ&oacute;mica</a>.</p><div class="confluence-information-macro confluence-information-macro-information"><p class="title conf-macro-render">Cambios</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p><time datetime="2021-09-30" class="date-past">30-sep-2021</time> Se actualiza la definición del servicio GET /gastos-invencion para recibir el nuevo parámetro tipoOperacion.</p></div></div><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 99.8624%;"><colgroup><col style="width: 6.67944%;"/><col style="width: 15.5556%;"/><col style="width: 16.9933%;"/><col style="width: 22.6565%;"/><col style="width: 36.528%;"/></colgroup><thead><tr><th style="width: 6.74003%;" class="confluenceTh"><p>Método</p></th><th style="width: 15.7497%;" class="confluenceTh"><p>URL</p></th><th style="width: 17.1939%;" class="confluenceTh"><p>Parámetros</p></th><th style="width: 22.9711%;" class="confluenceTh"><p>Respuesta</p></th><th style="width: 37.2077%;" class="confluenceTh">Descripción</th></tr></thead><tbody><tr><td class="highlight-grey confluenceTd" style="width: 99.8624%;" title="Color de fondo: Gris" colspan="5" data-highlight-colour="grey">Invención</td></tr><tr><td style="width: 6.74003%;" class="confluenceTd">HEAD</td><td style="width: 15.7497%;" class="confluenceTd"><span>/invenciones</span><span>/{id}</span></td><td style="width: 17.1939%;" class="confluenceTd"><br/></td><td style="width: 22.9711%;" class="confluenceTd"><span>HTTP 200 / HTTP 204</span></td><td style="width: 37.2077%;" class="confluenceTd"><p>Comprueba la existencia de la invención con el id indicado en el SGI. (A implementar por Treelogic)</p></td></tr><tr><td style="width: 6.74003%;" class="confluenceTd">GET</td><td style="width: 15.7497%;" class="confluenceTd">/invenciones</td><td style="width: 17.1939%;" class="confluenceTd"><p>q+s (query + sort)</p><p>La query estará formada por:</p><ul><li>invencionId</li></ul></td><td style="width: 22.9711%;" class="confluenceTd"><div class="content-wrapper"><p>Lista[Invencion]</p><p><br/></p></div></td><td style="width: 37.2077%;" class="confluenceTd"><p>Listado de todas las invenciones registradas en el SGI. (A implementar por Treelogic)</p><p><em>Ejemplo</em>:</p><p>invencionId=in=(150,151,152)</p></td></tr><tr><td class="highlight-grey confluenceTd" style="width: 99.8624%;" title="Color de fondo: Gris" colspan="5" data-highlight-colour="grey">Gastos</td></tr><tr><td style="width: 6.74003%;" class="confluenceTd">GET</td><td style="width: 15.7497%;" class="confluenceTd">/gastos-invencion/columnas</td><td style="width: 17.1939%;" class="confluenceTd"><p>q+s (query + sort)</p><p>La query estará formada por:</p><ul><li>invencionId</li></ul></td><td style="width: 22.9711%;" class="confluenceTd"><div class="content-wrapper"><p>Lista[Columna]</p><p><br/></p><p><br/></p></div></td><td style="width: 37.2077%;" class="confluenceTd"><p>Listado con las columnas que va a devolver la llamada /gastos-invencion.</p><p>Por cada columna se indica un id, nombre, si es una columna acumulable (se puede manejar como un importe y hacer operaciones numéricas con ella en el SGI).</p><p>Por defecto, devolverá las siguientes columnas:</p><ul><li>Fecha</li><li>Referencia</li><li>Concepto</li><li>Tipo</li><li>Importe (acumulable = Sí SOLO para una de las columnas)</li></ul><p>El tipo de operación</p></td></tr><tr><td style="width: 6.74003%;" class="confluenceTd">GET</td><td style="width: 15.7497%;" class="confluenceTd">/gastos-invencion</td><td style="width: 17.1939%;" class="confluenceTd"><p title="">q+s (query + sort)</p><p title="">La query estará formada por:</p><ul title=""><li>invencionId</li><li>tipoOperacion</li></ul><p title="">El tipo de operación puede tomar los siguientes valores:</p><ul title=""><li>GAS (Ejecución económica - Gastos)</li><li>REP (Ejecución económica - Repartos - Gastos a deducir)</li></ul></td><td style="width: 22.9711%;" class="confluenceTd"><div class="content-wrapper" title=""><p>Lista[DatoEconomico]</p><p><br/></p></div></td><td style="width: 37.2077%;" class="confluenceTd"><p title="">Listado de todos los gastos asociados a una invención.</p><p title="">Para cada gasto se devolverán los siguientes datos:</p><ul title=""><li>Identificador del gasto</li><li>Mapa de columnas de clave - valor (donde la clave será los id definidos en la llamada /gastos-invencion/columnas y el valor será el valor de la columna. El valor será un String salvo en aquellas columnas que sean acumulables, esto es, se puedan manejar como un importe y hacer operaciones numéricas con ella en el SGI, donde será de tipo Numérico (<u>sin separador de miles y como separador decimal el punto</u>).</li></ul><p title="">Si el tipo de operación se informa con el valor GAS, se han de devolver todos los gastos asociados a la invención.</p><p title="">Si por el contrario el tipo de operación es REP, se han de devolver del conjunto de gastos asociados a la invención únicamente aquellos que se deban tener en cuenta para el reparto de regalías. En el caso de UM, estos corresponderían con los gastos que haya pagado la OTRI, sea desde sus partidas propias o desde cualquier otra partida o proyecto.</p></td></tr><tr><td style="width: 6.74003%;" class="confluenceTd">GET</td><td style="width: 15.7497%;" class="confluenceTd">/gastos-invencion/{id}</td><td style="width: 17.1939%;" class="confluenceTd"><br/></td><td style="width: 22.9711%;" class="confluenceTd"><p>DatoEconomicoDetalle</p><div class="content-wrapper"><p><br/></p><p><br/></p></div></td><td style="width: 37.2077%;" class="confluenceTd"><p>Detalle de un gasto.</p><p>Para cada gasto se devolverán los siguientes datos:</p><ul><li>Identificador del gasto</li><li><span style="color: rgb(0,0,0);">Listado de documentos (identificador, nombre del documento y nombre del fichero, sin el contenido)</span></li></ul></td></tr><tr><td class="highlight-grey confluenceTd" style="width: 6.74003%;" title="Color de fondo: Gris" data-highlight-colour="grey">Ingresos</td><td class="highlight-grey confluenceTd" style="width: 15.7497%;" title="Color de fondo: Gris" data-highlight-colour="grey"><br/></td><td class="highlight-grey confluenceTd" style="width: 17.1939%;" title="Color de fondo: Gris" data-highlight-colour="grey"><br/></td><td class="highlight-grey confluenceTd" style="width: 22.9711%;" title="Color de fondo: Gris" data-highlight-colour="grey"><br/></td><td class="highlight-grey confluenceTd" style="width: 37.2077%;" title="Color de fondo: Gris" data-highlight-colour="grey"><br/></td></tr><tr><td style="width: 6.74003%;" class="confluenceTd">GET</td><td style="width: 15.7497%;" class="confluenceTd">/ingresos-invencion/columnas</td><td style="width: 17.1939%;" class="confluenceTd"><p>q+s (query + sort)</p><p>La query estará formada por:</p><ul><li>proyectoId</li></ul></td><td style="width: 22.9711%;" class="confluenceTd"><div class="content-wrapper"><p>Lista[Columna]</p><p><br/></p><p><br/></p></div></td><td style="width: 37.2077%;" class="confluenceTd"><p>Listado con las columnas que va a devolver la llamada /ingresos-invencion.</p><p>El identificador de proyecto a enviar al SGE ha de ser el del proyecto económico en Justo.</p><p>Por cada columna se indica un id, nombre, si es una columna acumulable (se puede manejar como un importe y hacer operaciones numéricas con ella en el SGI).</p><p>Por defecto, devolverá las siguientes columnas:</p><ul><li>Fecha</li><li>Referencia</li><li>Importe (acumulable = Sí)</li><li>Nº interno de contrato</li><li>Entidad pagadora</li></ul></td></tr><tr><td style="width: 6.74003%;" class="confluenceTd">GET</td><td style="width: 15.7497%;" class="confluenceTd">/ingresos-invencion</td><td style="width: 17.1939%;" class="confluenceTd"><p>q+s (query + sort)</p><p>La query estará formada por:</p><ul><li>proyectoId</li></ul></td><td style="width: 22.9711%;" class="confluenceTd"><div class="content-wrapper"><p>Lista[DatoEconomico]</p><p><br/></p></div></td><td style="width: 37.2077%;" class="confluenceTd"><p>Listado de todos los ingresos asociados a una invención. La asociación en el SGI se realizará a través de contratos de CSP (proyectos) y el identificador de proyecto a enviar al SGE ha de ser el del proyecto económico en Justo.</p><p>Los ingresos devueltos se corresponderán con las facturas emitidas asociadas a la invención a través del contrato.</p><p>Para cada ingreso se devolverán los siguientes datos:</p><ul><li>Identificador del ingreso</li><li>Mapa de columnas de clave - valor (donde la clave será los id definidos en la llamada /ingresos-pii/columnas y el valor será el valor de la columna. El valor será un String salvo en aquellas columnas que sean acumulables, esto es, se puedan manejar como un importe y hacer operaciones numéricas con ella en el SGI, donde será de tipo Numérico (<u>sin separador de miles y como separador decimal el punto</u>).</li></ul></td></tr></tbody></table></div><h3 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-ColumnasGastos">Columnas Gastos</h3><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 67.7651%;"><colgroup><col style="width: 3.18584%;"/><col style="width: 19.028%;"/><col style="width: 10.444%;"/><col style="width: 67.3496%;"/></colgroup><tbody><tr><th class="confluenceTh">id</th><th class="confluenceTh">nombre</th><th class="confluenceTh">acumulable</th><th colspan="1" class="confluenceTh">descripción</th></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd"><p>Fecha</p></td><td class="confluenceTd">false</td><td colspan="1" class="confluenceTd">Fecha de emisión</td></tr><tr><td class="confluenceTd">2</td><td class="confluenceTd">Referencia</td><td class="confluenceTd">false</td><td colspan="1" class="confluenceTd">Nº / año factura</td></tr><tr><td class="confluenceTd">3</td><td class="confluenceTd">Concepto</td><td class="confluenceTd">false</td><td colspan="1" class="confluenceTd">Descripción de factura</td></tr><tr><td colspan="1" class="confluenceTd">4</td><td colspan="1" class="confluenceTd">Tipo</td><td colspan="1" class="confluenceTd">false</td><td colspan="1" class="confluenceTd">Tipo de gasto</td></tr><tr><td colspan="1" class="confluenceTd">5</td><td colspan="1" class="confluenceTd">Importe</td><td colspan="1" class="confluenceTd">true</td><td colspan="1" class="confluenceTd">Base imponible</td></tr></tbody></table></div><h3 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-ColumnasIngresos">Columnas Ingresos</h3><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 62.6368%;"><colgroup><col style="width: 3.84615%;"/><col style="width: 17.4825%;"/><col style="width: 9.61539%;"/><col style="width: 69.056%;"/></colgroup><tbody><tr><th class="confluenceTh">id</th><th class="confluenceTh">nombre</th><th class="confluenceTh">acumulable</th><th colspan="1" class="confluenceTh">descripción</th></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd"><p>Fecha</p></td><td class="confluenceTd">false</td><td colspan="1" class="confluenceTd">Fecha de emisión</td></tr><tr><td class="confluenceTd">2</td><td class="confluenceTd">Referencia</td><td class="confluenceTd">false</td><td colspan="1" class="confluenceTd">Serie-Nº factura / año factura</td></tr><tr><td class="confluenceTd">3</td><td class="confluenceTd">Importe</td><td class="confluenceTd">true</td><td class="confluenceTd">Base imponible</td></tr><tr><td class="confluenceTd">3</td><td class="confluenceTd">Nº interno de contrato</td><td class="confluenceTd">false</td><td colspan="1" class="confluenceTd">Identificador del contrato del SGI asociado al ingreso</td></tr><tr><td colspan="1" class="confluenceTd">4</td><td colspan="1" class="confluenceTd">Entidad pagadora</td><td colspan="1" class="confluenceTd">false</td><td colspan="1" class="confluenceTd">Nombre del tercero pagador de la factura emitida</td></tr></tbody></table></div><h3 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-Ejemplos">Ejemplos</h3><h4 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-Columnasdegastos(/gastos-invencion/columnas)">Columnas de gastos (/gastos-invencion/columnas)</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Respuesta</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: RDark" data-theme="RDark">[
 {
   &quot;id&quot;: &quot;1&quot;
   &quot;nombre&quot;:&quot;Fecha&quot;
   &quot;acumulable&quot;: &quot;false&quot;
  },
  {
   &quot;id&quot;:&quot;2&quot;,
   &quot;nombre&quot;:&quot;Referencia&quot;,
   &quot;acumulable&quot;: &quot;false&quot;
  },
  {
   &quot;id&quot;:&quot;3&quot;,
   &quot;nombre&quot;:&quot;Concepto&quot;,
   &quot;acumulable&quot;: &quot;false&quot;
  },
  {
   &quot;id&quot;:&quot;4&quot;,
   &quot;nombre&quot;:&quot;Tipo&quot;,
   &quot;acumulable&quot;: &quot;false&quot;
  },
  {
   &quot;id&quot;:&quot;5&quot;,
   &quot;nombre&quot;:&quot;Importe&quot;,
   &quot;acumulable&quot;: &quot;true&quot;
  }

]</pre>
</div></div><h4 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-Gastos(/gastos-invencion)">Gastos (/gastos-invencion)</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Respuesta</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: RDark" data-theme="RDark">[
{
	&quot;id&quot;:&quot;1&quot;,
	&quot;tipo&quot;:&quot;Gasto&quot;,
	&quot;columnas&quot;: {
     	&quot;1&quot;:,
     	&quot;2&quot;:&quot;F123456&quot;,
     	&quot;3&quot;:&quot;Informe de patentabilidad&quot;,
     	&quot;4&quot;:&quot;Honorarios&quot;,
     	&quot;5&quot;:55.99
     	}
 
},
{
	&quot;id&quot;:&quot;2&quot;,
	&quot;tipo&quot;:&quot;Gasto&quot;,
	&quot;columnas&quot;: {
     	&quot;1&quot;:,
     	&quot;2&quot;:&quot;F123457&quot;,
     	&quot;3&quot;:&quot;Solicitud de patente&quot;,
     	&quot;4&quot;:&quot;Tasa&quot;,
     	&quot;5&quot;:99.99
     	}
}
]

</pre>
</div></div><h4 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-Detallegasto(/gastos-invencion/{id})"><strong>Detalle gasto (/gastos-invencion/{id})</strong></h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Respuesta</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: RDark" data-theme="RDark">&quot;id&quot;:&quot;2&quot;,
&quot;documentos&quot;:[
  {
   &quot;id&quot;: &quot;11&quot;,  
   &quot;nombre&quot;:&quot;Factura&quot;,
   &quot;nombreFichero&quot;:&quot;factura.pdf&quot;
  },
  {
    &quot;id&quot;: &quot;12&quot;, 
    &quot;nombre&quot;:&quot;Otro documento&quot;,
    &quot;nombreFichero&quot;:&quot;otroDocumento.pdf&quot;
  }
]

</pre>
</div></div><h3 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-Seguridad">Seguridad</h3><p>Actualmente las peticiones realizadas al esb se harán enviando un token de acceso en la cabecera de <strong>authentication</strong>, aunque se seguirá trabando en la seguridad para realizar una comunicación máquina a máquina y no mediante usuario/contraseña sino a través de un secret.<h4 id="SistemadegestióndePatentes(UMSGIESBSGEPII)-Seguridadconusuario/contraseña">Seguridad con usuario/contraseña</h4><p>Se utiliza OAuth 2 sobre el protocolo OpenID Connect (OIDC).</p><p>En <a class="external-link" href="http://sgi.ic.corp.treelogic.com/auth/realms/sgi/.well-known/openid-configuration" rel="nofollow">http://sgi.ic.corp.treelogic.com/auth/realms/sgi/.well-known/openid-configuration</a> se pueden consultar los endpoint disponibles de OIDC.</p><p>Mediante <strong>POST</strong> a <a class="external-link" href="http://sgi.ic.corp.treelogic.com/auth/realms/sgi/protocol/openid-connect/token" rel="nofollow">http://sgi.ic.corp.treelogic.com/auth/realms/sgi/protocol/openid-connect/token</a> se obtiene el token de acceso y el de refresco. Por defecto el token de acceso solo es válido 5 minutos, y el de refresco 30 minutos. Este mismo enpdoint permite refrescar los tokens. <span>El content-type de la petición ha de ser </span><strong>application/x-www-form-urlencoded</strong><span> </span></p><p><span>Para la obtención de los tokens se incluirán los siguientes campos:</span></p><div class="table-wrap"><table class="confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><td class="confluenceTd">client_id</td><td class="confluenceTd">front</td><td class="confluenceTd">Identifica al cliente, por ahora el mismo que la web pero cambiará más adelante</td></tr><tr><td colspan="1" class="confluenceTd">username</td><td colspan="1" class="confluenceTd">visor-csp</td><td colspan="1" class="confluenceTd">Usuario de la autenticación, en el futuro ya no será necesario</td></tr><tr><td colspan="1" class="confluenceTd">password</td><td colspan="1" class="confluenceTd">visor-csp</td><td colspan="1" class="confluenceTd">Password del usuario, en el futuro ya no será necesario.</td></tr><tr><td colspan="1" class="confluenceTd">grant_type</td><td colspan="1" class="confluenceTd">password</td><td colspan="1" class="confluenceTd">Tipo de autenticación, más adelante cambiará.</td></tr></tbody></table></div><p>Para el refresco de los tokens se incluirán los siguientes campos:</p><div class="table-wrap"><table class="confluenceTable"><colgroup><col/><col/><col/></colgroup><tbody><tr><td class="confluenceTd">client_id</td><td class="confluenceTd">front</td><td class="confluenceTd">Identifica al cliente, por ahora el mismo que la web pero cambiará más adelante</td></tr><tr><td colspan="1" class="confluenceTd">grant_type</td><td colspan="1" class="confluenceTd">refresh_token</td><td colspan="1" class="confluenceTd">Tipo de autenticación.</td></tr><tr><td colspan="1" class="confluenceTd">refresh_token</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">Se enviará el token de refresco que se disponga en ese momento.</td></tr></tbody></table></div><p><br/></p><p><br/></p></p><p><br/></p>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/597852911/597858658.png">SGI PII Logical Model - Ejecución económica.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/597852911/597872621.png">ESB SGEPII Logical Model.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="comments" class="pageSectionTitle">Comments:</h2>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-597882508"></a>
                                    <font class="smallfont"><p><span style="color: rgb(23,43,77);">Tras reunión mantenida con Juana y Ginés, en el listado de los gastos asociados a una invención y cuando el tipo de operación es REP, deben devolverse los gastos pagados por la OTRI desde sus propias partidas. No lo pagado desde otras partidas.</span></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/contenttypes/comment_16.png" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by hercules.jorge.carrillo at feb 09, 2022 14:30
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-597882511"></a>
                                    <font class="smallfont"><p>Ok, lo modifico en la definición del método. A nuestros efectos necesitaríamos un proyecto de justo al que se hayan cargado gastos de una invención que cumplan esa condición para que sean devueltos con un tipo operaicón &quot;REP&quot;. Entiendo que la OTRI está informada de este cambio en cuanto a los gastos que van a poder ver ¿es así?</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/contenttypes/comment_16.png" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by alicia.alvarez at feb 09, 2022 15:15
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    </div>
                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on oct 09, 2024 11:56</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
